const pokemonRepository = function () { const t = [], e = "https://pokeapi.co/api/v2/pokemon/?limit=150"; function o(e) { t.push(e) } function n(t) { pokemonRepository.loadDetails(t).then(function () { const e = $(".modal-body"), o = $(".modal-title").text(t.name.charAt(0).toUpperCase() + t.name.slice(1)), n = $('<p class="pokemon-height"></p>').text("Height: " + t.height + "0 cm"), i = $('<p class="pokemon-type"></p>').text("Type: " + t.types), a = $('<img class="pokemon-img">'); a.attr("src", t.imageUrl), e.children().length && e.children().remove(), e.append(o), e.append(n), e.append(i), e.append(a) }) } return { add: o, getAll: function () { return t }, addListItem: function (t) { const e = $(".pokemon-list"), o = $(`<button type="button" class="pokemon-list-btn list-group-item \n            ist-group-item-action" data-toggle="modal" data-target="#modal-item"> \n            ${t.name} </button>`); e.append(o), o.on("click", function () { n(t) }) }, loadList: function () { return $.ajax(e, { dataType: "json" }).then(function (t) { $.each(t.results, function (t, e) { o({ name: e.name, detailsUrl: e.url }) }) }).catch(function (t) { console.error(t) }) }, loadDetails: function (t) { const e = t.detailsUrl; return $.ajax(e).then(function (e) { t.imageUrl = e.sprites.front_default, t.height = e.height, t.types = e.types.map(t => t.type.name).join(", ") }).catch(function (t) { console.error(t) }) }, showDetails: n } }(); pokemonRepository.loadList().then(function () { const t = pokemonRepository.getAll(); $.each(t, function (t, e) { pokemonRepository.addListItem(e) }) }), $(document).ready(function () { $("#search-pokemon").on("keyup", function () { const t = $(this).val().toLowerCase(); $(".pokemon-list-btn").filter(function () { $(this).toggle($(this).text().toLowerCase().indexOf(t) > -1) }) }) });